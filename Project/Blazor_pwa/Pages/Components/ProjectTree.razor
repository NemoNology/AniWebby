@using Blazor_pwa.Models.Implementations
@namespace Blazor_pwa.Pages.Components
@inherits BaseComponent

<div style="@Style" class="flex flex-col gap-3 p-2 @Class">
    <div style="align-self: center;" class="p-2 text-semibold">Проект:</div>
    <div class="flex p-2 gap-1">
        <label for="title_input">Заголовок:</label>
        <input type="text" @bind="@Project.Title" size="8" class="flex-grow-1">
    </div>
    <div style="border: 4px solid var(--color-accent);" class="bg-light w-100 flex flex-col gap-2 flex-grow-1">
        <div style="justify-content: space-around;" class="bg-accent flex p-2 w-100">
            <Button Content="+div" OnClick="AddDiv" />
            <Button Content="+img" OnClick="AddImg" />
            <Button Content="+anim" OnClick="AddAnimation" />
        </div>
        <div style="display: flex; flex-direction: column; flex-grow: 1; width: 100%;">
            <div class="flex-grow-1" style="overflow: auto;">
                Элементы: <br>
                <div style="display: flex; flex-direction: column;">
                    @foreach (var el in Project.Elements)
                    {
                        <div>@HtmlElementsInfo.GetHtmlElementNameByType(el.Type) <br></div>
                    }
                </div>
            </div>
            <div class="flex-grow-1" style="overflow: auto; border-top: 4px solid var(--color-accent); width: 100%;">
                Анимации: <br>
                <div style="display: flex; flex-direction: column;">
                    @foreach (var anim in Project.Animations)
                    {
                        <div>@anim.Name <br></div>
                    }
                </div>
            </div>
        </div>
    </div>
</div>

@code {
    [Parameter, EditorRequired]
    public Models.Implementations.Project Project { get; set; } = null!;

    void AddDiv()
    {
        Project.Elements.Add(new Models.Implementations.DivElement());
    }

    void AddImg()
    {
        Project.Elements.Add(new Models.Implementations.ImageElement());
    }

    void AddAnimation()
    {
        Project.Animations.Add(new Models.Implementations.Animation("animation"));
    }
}