@namespace WebAnimEdit.Pages.Components
@using System.Collections
@using System.ComponentModel
@inherits WebAnimEdit.Pages.Components.BaseComponent

<MudTreeView @bind-SelectedValue="@SelectedElement" Dense="true" Hover="true" Items="@_treeItems">
    <ItemTemplate>
        <MudTreeViewItem Value="@context" Items="@context.Children" />
    </ItemTemplate>
</MudTreeView>

@code {
    private HashSet<HtmlElement> _treeItems = new();

    [Parameter, EditorRequired, Bindable(true, BindingDirection.TwoWay)]
    public HtmlElement Root { get; set; } = null!;
    [Parameter, Bindable(true, BindingDirection.TwoWay)]
    public HtmlElement SelectedElement { get; set; } = null!;
    [Parameter]
    public EventCallback<HtmlElement> RootChanged { get; set; }
    [Parameter]
    public EventCallback<HtmlElement?> SelectedElementChanged { get; set; }

    protected override void OnParametersSet()
    {
        _treeItems.Add(Root);
    }
}